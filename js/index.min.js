function createCart(){var a={price:0,numberOfItems:0},b="item"+a.numberOfItems;a[b]=format.value+","+kolicina.value,a.numberOfItems=parseInt(a.numberOfItems+1),a.price=parseInt(prices[format.value])*parseInt(kolicina.value),localStorage.setItem("cart",JSON.stringify(a)),addItemOnPage(),check()}function addToCart(){var a=JSON.parse(localStorage.getItem("cart")),b="item"+parseInt(a.numberOfItems);a[b]=format.value+","+kolicina.value,a.numberOfItems=parseInt(a.numberOfItems+1),a.price+=parseInt(prices[format.value])*parseInt(kolicina.value),localStorage.setItem("cart",JSON.stringify(a)),addItemOnPage(),check()}function addItemOnPage(){var a=JSON.parse(localStorage.getItem("cart")),b=a.numberOfItems-1,c=a["item"+b],d=c.split(",")[0],e=c.split(",")[1],f=parseInt(prices[d])*parseInt(e);$("#cart").append("<div class='row"+b+"'><div class='col-md-12 text-center'><div class='thumbnail'><p>Format: "+d+"</p><p>Koli훾ina: "+e+"</p><p>Cena: "+f+"</p><button class='btn btn-danger delete"+b+" obrisi'><span class='glyphicon glyphicon-trash'></span>&nbsp;Ukloni</button></div></div></div>"),updateThePrice(a.price),addListener()}function check(){if(options.development){var a=JSON.parse(localStorage.getItem("cart"));console.log(a)}}function addListener(){var a=obrisi.length-1;obrisi[a].addEventListener("click",function(){var a=$(this).prop("classList")[2],b=a.withoutFirst(6);removeItem(b)})}function removeItem(a){$(".row"+a).fadeOut("slow").remove();var b=JSON.parse(localStorage.getItem("cart")),c=b["item"+a],d=c.split(",")[0],e=c.split(",")[1],f=parseInt(prices[d])*parseInt(e);b.price-=f,updateThePrice(b.price),delete b["item"+a],localStorage.setItem("cart",JSON.stringify(b)),check()}function updateThePrice(a){$(".cena").text(a)}var format=document.getElementById("format"),kolicina=document.getElementById("kolicina"),naruci=document.getElementById("naruci"),obrisi=document.getElementsByClassName("obrisi"),obrisi_sve=document.getElementById("obrisi_sve"),prices={"1:3":10,"2:5":20,"3:6":30},options={development:!1};String.prototype.withoutFirst=function(a){return this.substring(a,this.length)},document.addEventListener("DOMContentLoaded",function(){if(localStorage.getItem("cart")){for(var a=JSON.parse(localStorage.getItem("cart")),b=Object.keys(a),c=b.length,d=2;d<c;d++){var e=String(a[b[d]]).split(",")[0],f=String(a[b[d]]).split(",")[1],g=b[d].withoutFirst(5),h=parseInt(prices[e])*parseInt(f);$("#cart").append("<div class='row"+g+"'><div class='col-md-12 text-center'><div class='thumbnail'><p>Format: "+e+"</p><p>Koli훾ina: "+f+"</p><p>Cena: "+h+"</p><button class='btn btn-danger delete"+g+" obrisi'><span class='glyphicon glyphicon-trash'></span>&nbsp;Ukloni</button></div></div></div>"),addListener(),check()}updateThePrice(a.price)}}),naruci.addEventListener("click",function(){localStorage.getItem("cart")?parseInt(kolicina.value)<=0?alert("Morate uneti koli훾inu!"):addToCart():parseInt(kolicina.value)<=0?alert("Morate uneti koli훾inu!"):createCart()}),obrisi_sve.addEventListener("click",function(){if(localStorage.getItem("cart")){for(var a=JSON.parse(localStorage.getItem("cart")),b=Object.keys(a),c=b.length,d=2;d<c;d++){var e=b[d].withoutFirst(4);$(".row"+e).remove(),console.log(e)}updateThePrice(0),localStorage.removeItem("cart"),check()}});